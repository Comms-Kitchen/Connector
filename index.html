<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">

<head>
	<title>Cross-Browser QRCode generator for Javascript</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
	<script type="text/javascript" src="jquery.min.js"></script>
	<script type="text/javascript" src="qrcode.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

	<style>
		body {
			font-family: 'IBM Plex Mono', monospace;
		}
		.btn-primary, .btn-primary:active, .btn-primary:visited {
 		   background-color: crimson !important;
			border: 0rem;
		}
		.btn-primary:hover {
 		   background-color: darkred !important;
			border: 0rem;
		}
	</style>
</head>

<body>

	<div class="px-4 py-5 my-5 text-center">

		<img class="d-block mx-auto mb-4" src="CommsKitchenLogo.svg" alt="Comms Kitchen Logo" width="150rem" />
		<h1 class="display-5 fw-bold">Wallet Connector</h1>
		<div class="col-lg-6 mx-auto">
			<p class="lead mb-4">Sign in to your wallet provider below to link your wallet to the Comms Kitchen iOS and Android messaging apps.</p>
			<div class="d-grid gap-2 d-sm-flex mb-4 justify-content-sm-center">
				<button id='loginButton' type="button" class="btn btn-primary btn-lg px-4 gap-3" onclick="">Login with MetaMask</button>
			</div>

			<p id='userWalletAddress' class="mb-4"></p>
			
			<div id="qrcode" class="d-block mx-auto mb-4" style="width:200px; height:200px; margin-top:15px;"></div>
			
			<div id="qrnote"><p>Scan this QR code in your add wallet page in the Comms Kitchen App</p></div>
			<p id='userWallet'></p>
		</div>
		<p class="mb-4"><i>Note that this is currently an in-secure demo prototype to be used for testing purposes only.</i></p>

		<script src="metamask.js"></script>
		<script type="text/javascript">
			var x = document.getElementById("qrcode")
			
			var qrcode = new QRCode(document.getElementById("qrcode"), {
				width: 200,
				height: 200
			});

			function makeCode() {
				var elText = window.userWalletAddress;

				if (!elText) {

					x.style.display = "none";

					return;
				}
				x.style.display = "block";
				qrcode.makeCode(elText);
			}

			makeCode();
		</script>
	</div>
	<!-- JavaScript Bundle with Popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
	</script>
</body>